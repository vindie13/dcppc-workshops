---
title: "May regstration as of May 9"
author: "Rayna M Harris"
date: "5/9/2018"
output: md_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```


```{r raw, message=FALSE, include=FALSE}
## Load raw data
df <- read_csv("./data/tito-dcppc-may-data-commons-workshop-tickets-for-rayna-harris-gmail-com-1091862.csv")

# names(df) # view header 
```

```{r annonymize, include=FALSE}
## keep these columns only
df <- df[c(1,3,5,11,19,28:32)] # manually selected for importance
df <- df[-c(1),] # drop test registramt
# names(df) # confirm
```

How many incomplete registrants?

```{r incomplete, echo=FALSE}
length(df$`Which Team are you a member of?`[is.na(df$`Which Team are you a member of?`)])
```



```{r factorize, include=FALSE}
##  Make factors
cols <- c(2:9) # character columns to turn to factors
df[cols] <- lapply(df[cols], factor) # set as factor
# sapply(df, class) # confirm
df <- na.omit(df) # drop nas

```

How many total registrants?

```{r totalregistered, echo=FALSE}
length(df$`Which Team are you a member of?`[(df$`Which Team are you a member of?`)])
```


```{r teamnames}
#names(df)[7]<-"Team"
df$`Which Team are you a member of?` <- ifelse(grepl("Data Stewards", df$`Which Team are you a member of?`), "Data Stewards",
                  ifelse(grepl("NIH", df$`Which Team are you a member of?`), "NIH",
                  ifelse(grepl("Carbon", df$`Which Team are you a member of?`), "Carbon",
                  ifelse(grepl("Copper", df$`Which Team are you a member of?`), "Copper",
                  ifelse(grepl("Nitrogen", df$`Which Team are you a member of?`), "Nitrogen",
                  ifelse(grepl("Sodium", df$`Which Team are you a member of?`), "Sodium",
                  ifelse(grepl("Xenon", df$`Which Team are you a member of?`), "Xenon",
                  ifelse(grepl("Yttrium", df$`Which Team are you a member of?`), "Yttrium", 
                  ifelse(grepl("Argon", df$`Which Team are you a member of?`), "Argon",
                  ifelse(grepl("Calcium", df$`Which Team are you a member of?`), "Calcium",
                  ifelse(grepl("Helium", df$`Which Team are you a member of?`), "Helium",
                  ifelse(grepl("Phosphorus", df$`Which Team are you a member of?`), "Phosphorus", "Other"))))))))))))
df$`Which Team are you a member of?` <- as.factor(as.character(df$`Which Team are you a member of?`))
names(df)[7]<-"Team"
```

Summary statistics for may meeting thus far
```{r summarize}
summary(df$`Do you agree to abide by the event Code of Conduct?`) 
summary(df$`Team`)
summary(df$`Do you have any dietary restrictions?`)
summary(df$`Do you agree to video recording?`)
# maybe/unsure shown as `-`
summary(df$`Do you need assistance with childcare (reimbursements, accomdations)?`)
```

```{r names}
attendees <- df %>% 
  select(`Ticket Full Name`, `Team`) %>%  
  arrange(`Team`)
attendees <- as.data.frame(attendees)
attendees

attendees <- df %>% 
  select(`Ticket Full Name`, `Team`) %>%  
  arrange(`Ticket Full Name`)
attendees <- as.data.frame(attendees)
attendees
write.csv(attendees, "./data/attendees.csv")
```